<!DOCTYPE html>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

<head>
    <meta charset="UTF-8">
    <title>We are office workers!</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body style="padding: 10px;">
<input type="hidden" id="status" th:value="${status}">
<div class="container text-center" style="max-width: 720px;">
    <form class="row" action="/insert" method="post">
        <input type="hidden" name="boss" id="submit-array">
        <div class="mb-3" style="padding: 0 12px;">
            <input type="text" class="form-control" name="nick" id="inputNick" placeholder="닉네임을 입력하세요." required>
        </div>
        <div class="row row-btn-ow">
            <div class="col btn-chap-4 btn-ow" id="a" onclick="switchButton('a', 'btn-chap-4')">스바르트</div>
            <div class="col btn-chap-4 btn-ow" id="b" onclick="switchButton('b', 'btn-chap-4')">두라스로르</div>
            <div class="col btn-chap-4 btn-ow" id="c" onclick="switchButton('c', 'btn-chap-4')">모네가름</div>
            <div class="col btn-chap-4 btn-ow" id="d" onclick="switchButton('d', 'btn-chap-4')">드라우그</div>
            <div class="col btn-chap-4 btn-ow" id="e" onclick="switchButton('e', 'btn-chap-4')">굴베이그</div>
        </div>
        <div class="row row-btn-ow">
            <div class="col btn-chap-5 btn-ow" id="f" onclick="switchButton('f', 'btn-chap-5')">메기르</div>
            <div class="col btn-chap-5 btn-ow" id="g" onclick="switchButton('g', 'btn-chap-5')">신마라</div>
            <div class="col btn-chap-5 btn-ow" id="h" onclick="switchButton('h', 'btn-chap-5')">헤르가름</div>
            <div class="col btn-chap-5 btn-ow" id="i" onclick="switchButton('i', 'btn-chap-5')">탕그리스니르</div>
            <div class="col btn-chap-5 btn-ow" id="j" onclick="switchButton('j', 'btn-chap-5')">엘드룬</div>
        </div>
        <div class="row row-btn-ow">
            <div class="col btn-dungeon btn-ow" id="k" onclick="switchButton('k', 'btn-dungeon')">7층 드라우그</div>
            <div class="col btn-dungeon btn-ow" id="l" onclick="switchButton('l', 'btn-dungeon')">최하층 강글로티</div>
            <div class="col btn-dungeon btn-ow" id="m" onclick="switchButton('m', 'btn-dungeon')">최하층 굴베이그</div>
        </div>
        <div class="row row-btn-ow" style="margin-bottom: 16px;">
            <div class="col btn-god btn-ow" id="n" onclick="switchButton('n', 'btn-god')">아우둠라</div>
            <div class="col btn-god btn-ow" id="o" onclick="switchButton('o', 'btn-god')">티르</div>
            <div class="col btn-god btn-ow" id="p" onclick="switchButton('p', 'btn-god')">토르</div>
            <div class="col btn-god btn-ow" id="q" onclick="switchButton('q', 'btn-god')">오딘</div>
        </div>
        <div class="d-grid gap-2">
            <button class="btn btn-secondary" type="submit">저장하기</button>
        </div>
    </form>
</div>
</body>

</html>

<script>
    const status = JSON.parse(document.getElementById("status").value);
    if(status == true) {
        alert("저장되었습니다! 수고하셨습니다 :)");
    }

    const nums = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q'];
    const bossNames = ['스바르트','두라스로르','모네가름','드라우그','굴베이그','메기르','신마라','헤르가름','탕그리스니르','엘드룬','7층 드라우그','최하층 강글로티','최하층 굴베이그','아우둠라','티르','토르','오딘'];

    let bossArr = [];

    function switchButton(id, className) {
        let element = document.getElementById(id);

        const idx = nums.findIndex((e) => e == id);

        if(element.classList.contains(className)) {
            element.classList.replace(className, className+'-active');
            bossArr.push(bossNames[idx]);
            document.getElementById('submit-array').setAttribute('value', bossArr.toString());
        } else {
            element.classList.replace(className+'-active', className);
            const delIdx = bossArr.findIndex((e) => e == bossNames[idx]);
            if(delIdx > -1) {
                bossArr.splice(delIdx, 1);
                document.getElementById('submit-array').setAttribute('value', bossArr.toString());
            }
        }
    }

</script>

<style>
    .row-btn-ow { margin: 0; height: 120px; line-height: 120px; }
    .btn-ow { padding: 0; cursor: pointer;}

    .btn-chap-4 { background: #F7F7F7; }
    .btn-chap-4-active { background: #7ABE1F; color: #ffffff; }

    .btn-chap-5 { background: #F5F5F5; }
    .btn-chap-5-active { background: #EE5858; color: #ffffff; }

    .btn-dungeon { background: #F3F3F3; }
    .btn-dungeon-active { background: #A678EA; color: #ffffff; }

    .btn-god { background: #F1F1F1; }
    .btn-god-active { background: #59A5E3; color: #ffffff; }
</style>